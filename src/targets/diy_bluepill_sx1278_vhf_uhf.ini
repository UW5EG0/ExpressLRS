# ********************************
# Transmitter targets
# ********************************

[env:DIY_VHF_TX_via_STLINK]
extends = env_common_stm32, radio_433
build_flags =
	${env_common_stm32.build_flags}
	${radio_433.build_flags}
	${common_env_data.build_flags_tx}
	-include target/STM32_DIY_VHF_TX.h
	-flto
	-D HSE_VALUE=12000000U
	-DVECT_TAB_OFFSET=0x4000U
board_build.ldscript = variants/R9M_ldscript.ld
board_build.flash_offset = 0x4000
build_src_filter = ${env_common_stm32.build_src_filter} -<rx_*.cpp>
upload_flags =
	BOOTLOADER=bootloader/r9m_bootloader.bin
	VECT_OFFSET=0x4000


# ********************************
# Receiver targets
# ********************************

[env:DIY_VHF_RX_via_STLINK]
extends = env_common_stm32, radio_433
#board = bluepill_f103c8
build_flags =
	${env_common_stm32.build_flags}
	${radio_433.build_flags}
	${common_env_data.build_flags_rx}
	-include target/STM32_DIY_VHF_RX.h
	-D HSE_VALUE=24000000U
	-DVECT_TAB_OFFSET=0x08008000U
board_build.ldscript = variants/R9M_ldscript.ld
build_src_filter = ${env_common_stm32.build_src_filter} -<tx_*.cpp>
upload_flags =
    BOOTLOADER=bootloader/r9mm_bootloader.bin
    VECT_OFFSET=0x4000